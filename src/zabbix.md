---
date: 2026-01-09
---
> 要回顾的：
> 	TCP 有限状态机 有11种
> 	
# zabbix使用
## 告警
### 告警媒介
- 使用脚本方式时，脚本需要存放在`/usr/lib/zabbix/alertscripts/`路径下


Proxy使用


- 如果批量添加100台机器
	- 自动发现-发现动作 （额外消耗资源不推荐）
	- 自动注册 （推荐，节省资源）

## 面试题
**简述 Zabbix 的核心架构，并描述一条监控数据从采集到告警的完整流转过程**
- 核心组件：
	- zabbix server：负责逻辑计算（如触发器判断）、配置同步、告警发送
	- zabbix agent：安装在被监控的机器上，复制执行数据的采集任务
	- database：数据库存储配置信息、历史数据和趋势数据
	- Web GUI：人机交互页面
-  流转过程：
	- 采集：Agent 根据配置（主动或被动）获取数据。
	- 传输： 数据发往 Server（或通过 Proxy 中转）。
	- 持久化： Server 将原始数据写入数据库的 `history` 相关表。
	- 判定： Server 的 `Timer` 或 `Poller` 进程根据触发器表达式判断数据是否“异常”。
	- 动作： 触发异常后，根据 Action 配置，通过脚本或接口发送告警通知。

**什么情况下你会把默认的被动模式改为主动模式？**
-  主动模式和被动模式都是基于agent的角度来说的。
	- 被动模式是由server轮询agent请求数据，server压力。不适合大规模监控
	- 主动模式是由agent端主动向server发送数据包，性能高。适合成千上万台机器
- 当server的性能不足时/当 Server 的 `Poller` 进程利用率过高，且队列堆积严重时，改为主动模式。
- 被监控服务器在内网，Server 无法主动“进去”，只需 Agent 能“出来”访问 Server 的 10051 端口即可。

****








