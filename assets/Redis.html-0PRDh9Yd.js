import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as e,a,o as s}from"./app-Bx68rh4o.js";const t="data:image/png;base64,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",n={};function o(r,i){return s(),e("div",null,[...i[0]||(i[0]=[a('<h1 id="redis" tabindex="-1"><a class="header-anchor" href="#redis"><span>Redis</span></a></h1><h2 id="nosql" tabindex="-1"><a class="header-anchor" href="#nosql"><span>NoSQL</span></a></h2><p>NoSQL（Not Only SQL）是指<strong>非关系型数据库</strong>，通常用于：</p><ul><li>高并发</li><li>海量数据</li><li>低延迟访问</li></ul><p>常见 NoSQL 类型：</p><ul><li>Key-Value（Redis）</li><li>文档型（MongoDB）</li></ul><p>CAP 理论<br> 分布式系统无法同时满足以下三点，只能满足其中两点：</p><ul><li>C（一致性）：所有节点数据一致</li><li>A（可用性）：每次请求都能得到响应</li><li>P（分区容忍性）：系统能容忍网络分区</li></ul><hr><h2 id="redis安装" tabindex="-1"><a class="header-anchor" href="#redis安装"><span>Redis安装</span></a></h2><h2 id="redis-数据类型" tabindex="-1"><a class="header-anchor" href="#redis-数据类型"><span>Redis 数据类型</span></a></h2><ul><li><strong>字符串：String</strong><ul><li>最基础类型、最大512M</li><li>场景：缓存对象 json、计数器、token/session</li></ul></li><li><strong>列表：List</strong>（有序，可重复） <ul><li>双向的链表，可以从两端插入/弹出，有顺序</li><li>场景：消息队列、时间线、任务列表</li></ul></li><li><strong>集合：Set</strong>（无序，不重复） <ul><li>无顺序的，会自动去重，支持交并差运算</li><li>场景：共同好友、去重、点赞 / 关注</li></ul></li><li><strong>有序集合：Sorted Set（zset）</strong><ul><li>有序，每个元素有 score</li><li>场景： 排行榜、延迟队列、权重排序</li></ul></li><li><strong>哈希：Hash</strong><ul><li>key → field → value</li><li>场景：存储对象、用户信息</li></ul></li></ul><hr><h2 id="redis-持久化机制" tabindex="-1"><a class="header-anchor" href="#redis-持久化机制"><span>Redis 持久化机制</span></a></h2><h3 id="rdb" tabindex="-1"><a class="header-anchor" href="#rdb"><span>RDB</span></a></h3><p>定期将内存数据生成快照文件（dump.rdb）</p><h4 id="save" tabindex="-1"><a class="header-anchor" href="#save"><span>save</span></a></h4><p>手动触发 RDB 持久化，会同步生成 dump.rdb 文件。</p><blockquote><p>save 是<strong>同步阻塞</strong>操作，会导致 Redis 服务不可用。</p></blockquote><p><strong>工作方式：</strong></p><ul><li>Redis 主线程执行</li><li>在执行期间： <ul><li>停止处理所有客户端请求</li><li>读写全部阻塞</li></ul></li><li>持久化完成后才恢复服务</li></ul><h4 id="bgsave" tabindex="-1"><a class="header-anchor" href="#bgsave"><span>bgsave</span></a></h4><p>用于<strong>后台异步触发 RDB 持久化</strong>，是 Redis <strong>推荐使用</strong>的方式。</p><p><strong>工作方式：</strong></p><ul><li>Redis 主线程： <ul><li>fork() 一个子进程</li></ul></li><li>子进程： <ul><li>负责生成 RDB 文件</li></ul></li><li>主进程： <ul><li>继续处理客户端请求<br><strong>核心机制：</strong></li></ul></li><li>fork 后： <ul><li>子进程读取原始内存数据</li><li>主进程若发生写操作： <ul><li>操作系统复制被修改的内存页</li></ul></li></ul></li><li>保证： <ul><li>数据一致</li><li>服务不中断</li></ul></li></ul><h3 id="aof" tabindex="-1"><a class="header-anchor" href="#aof"><span>AOF</span></a></h3><p>记录每一条写命令，类似mysql的二进制日志方式</p><h4 id="aof-的三种刷盘策略" tabindex="-1"><a class="header-anchor" href="#aof-的三种刷盘策略"><span>AOF 的三种刷盘策略</span></a></h4><ol><li>always<br> 每条命令都刷盘、数据最安全、性能最差</li><li>everysec<br> 每秒刷盘一次、最多丢 1 秒数据、性能和安全性平衡最好</li><li>no<br> 由操作系统决定刷盘、性能最好数据风险最高</li></ol><h2 id="面试" tabindex="-1"><a class="header-anchor" href="#面试"><span>面试</span></a></h2><h3 id="缓存" tabindex="-1"><a class="header-anchor" href="#缓存"><span>缓存</span></a></h3><ul><li>缓存传透 <ul><li>原因：查询不存在的数据，请求穿过缓存直接打到数据库。</li><li>解决方法： <ul><li>布隆过滤器：在接口校验前加一层布隆过滤器，快速拦截不存在的非法请求。</li><li>缓存空对象：对查询后不存在的数据设置一个键值对记录为null，期时间要设短一点，防止占内存。</li></ul></li></ul></li><li>缓存击穿 <ul><li>原因：单个热点 Key 在过期的一瞬间，海量请求同时涌入，导致数据库瞬间崩溃。</li><li>解决方法： <ul><li>互斥锁：当缓存失效时，只允许一个线程去查库并回写缓存，其他请求等待或重试。【最常用】</li><li>设置热点数据永不过期：物理不过期，但后台异步更新。</li><li>逻辑过期：在 Value 中存储过期时间，发现过期后由异步线程去更新，期间请求返回旧数据。</li></ul></li></ul></li><li>缓存雪崩 <ul><li>原因：大量缓存在同时集中失效，或者 Redis 服务宕机，导致压力全部转向数据库。</li><li>解决方法： <ul><li>过期时间加随机值 (Jitter)，防止它们集体同时到期。</li><li>利用 Redis 集群/哨兵：提高可用性，防止因 Redis 宕机导致的雪崩。</li><li>多级缓存：增加本地缓存（如 Caffeine），作为最后一层屏障。</li><li>熔断与降级：当流量超过阈值，直接返回默认值或友好提示，保护数据库。</li></ul></li></ul></li></ul><h3 id="redis优化" tabindex="-1"><a class="header-anchor" href="#redis优化"><span>Redis优化</span></a></h3><ul><li>内存<code>sysctL vm.overcommit_memory=1</code></li><li>通过在配置问文件内修改实现禁用危险命令的效果</li><li>通过直接从终端快速临时修改端口、登陆密码</li></ul><p>备份<br> RDB默认备份策略<br><img src="'+t+'" alt="" loading="lazy"></p><h3 id="redis-启动时的数据恢复顺序" tabindex="-1"><a class="header-anchor" href="#redis-启动时的数据恢复顺序"><span>Redis 启动时的数据恢复顺序</span></a></h3><h4 id="切换到aof备份方式步骤" tabindex="-1"><a class="header-anchor" href="#切换到aof备份方式步骤"><span>切换到AOF备份方式步骤</span></a></h4><ol><li>在终端使用命令启动<code>appendonly</code></li><li>修改配置文件 <code>appendonly yes</code> 不需要重启服务</li></ol>',38)])])}const h=l(n,[["render",o]]),c=JSON.parse('{"path":"/Redis.html","title":"Redis","lang":"zh-CN","frontmatter":{"title":"Redis","date":"2026-01-16T00:00:00.000Z","category":["运维"],"tags":["Linux","redis","运维"],"description":"Redis NoSQL NoSQL（Not Only SQL）是指非关系型数据库，通常用于： 高并发 海量数据 低延迟访问 常见 NoSQL 类型： Key-Value（Redis） 文档型（MongoDB） CAP 理论 分布式系统无法同时满足以下三点，只能满足其中两点： C（一致性）：所有节点数据一致 A（可用性）：每次请求都能得到响应 P（分区容...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Redis\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2026-01-16T00:00:00.000Z\\",\\"dateModified\\":\\"2026-01-16T12:10:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"linss813\\",\\"url\\":\\"https://blog.linss.fun\\"}]}"],["meta",{"property":"og:url","content":"https://mister-hope.github.io/Redis.html"}],["meta",{"property":"og:site_name","content":"十三月"}],["meta",{"property":"og:title","content":"Redis"}],["meta",{"property":"og:description","content":"Redis NoSQL NoSQL（Not Only SQL）是指非关系型数据库，通常用于： 高并发 海量数据 低延迟访问 常见 NoSQL 类型： Key-Value（Redis） 文档型（MongoDB） CAP 理论 分布式系统无法同时满足以下三点，只能满足其中两点： C（一致性）：所有节点数据一致 A（可用性）：每次请求都能得到响应 P（分区容..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2026-01-16T12:10:42.000Z"}],["meta",{"property":"article:tag","content":"运维"}],["meta",{"property":"article:tag","content":"redis"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2026-01-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2026-01-16T12:10:42.000Z"}]]},"git":{"createdTime":1768565442000,"updatedTime":1768565442000,"contributors":[{"name":"linss","username":"linss","email":"lin813ss@163.com","commits":1,"url":"https://github.com/linss"}]},"readingTime":{"minutes":3.5,"words":1050},"filePathRelative":"Redis.md","excerpt":"\\n<h2>NoSQL</h2>\\n<p>NoSQL（Not Only SQL）是指<strong>非关系型数据库</strong>，通常用于：</p>\\n<ul>\\n<li>高并发</li>\\n<li>海量数据</li>\\n<li>低延迟访问</li>\\n</ul>\\n<p>常见 NoSQL 类型：</p>\\n<ul>\\n<li>Key-Value（Redis）</li>\\n<li>文档型（MongoDB）</li>\\n</ul>\\n<p>CAP 理论<br>\\n分布式系统无法同时满足以下三点，只能满足其中两点：</p>\\n<ul>\\n<li>C（一致性）：所有节点数据一致</li>\\n<li>A（可用性）：每次请求都能得到响应</li>\\n<li>P（分区容忍性）：系统能容忍网络分区</li>\\n</ul>","autoDesc":true}');export{h as comp,c as data};
